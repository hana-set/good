---
title:  "Data Blending"
excerpt: "서로 다른 데이터를 섞기"
categories:
  - Tab_Data
tags:
  - 3
last_modified_at: 2021-04-22

toc: true
toc_label: "Table Of Contents"
toc_icon: "cog"
toc_sticky: true

use_math : true
---

# Data blending 

- 데이터 통합으로서, 단순히 정보를 함께 표현한다. 
- blending 과 join 의 다른점은 집계를 수행할때 발생한다.
  - join : 데이터 연결하는 과정에서 서로 결합한 다음 집계가 이루어진다.
  - blending : 데이터를 집계한 다음 결합한다.
- 언제 사용할까? 
  - 교차 데이터베이스의 지원이 지원되지 않는, 서로 다른 데이터베이스의 데이터를 결합하려는 경우
  - 데이터의 세부 수준이 다른 경우
  - 데이터가 많은 경우

데이터 혼합은 여러 원본에서 데이터를 결합하게 해줍니다. 데이터의 결합에는 Join, Blending, Relationship 세가디가 있는데, 여기에서는 혼합(Blending) 을 사용해 보겠다.

**혼합**은 관계나 조인과 달리 데이터를 실제로 결합하지 않습니다. 대신 혼합은 각 데이터 원본을 독립적으로 쿼리하고 적절한 수준으로 결과를 집계한 다음 결과를 뷰에 시각적으로 함께 표시합니다. 이로 인해 혼합은 서로 다른 세부 수준을 처리할 수 있으며 게시된 데이터 원본에서 작동합니다. 또한 혼합은 모든 시트에서 개별적으로 설정되며 게시될 수 없습니다. 이것은 실제 "혼합된 데이터 원본"이 없고 여러 데이터 원본의 혼합된 결과만 비주얼리제이션에 나타나기 때문입니다. 

어떻게 이루어지는지는 다음과 같이 알아보겠습니다.

# Blending 하는법

우선 아래와 같이 데이터가 연결되어있는 상태에서, 원통모양의 기호를 클릭합니다. 그 이후에 추가할 데이터를 선택하자..

![png](/assets/images/Tab_Data/3_0.png)

그러면 아래와 같이, 새로운 데이터가 위에 표시되어있는것을 볼 수 있다.

![png](/assets/images/Tab_Data/3_1.png)

그 이후에 겹치는 필드를 더블클릭해서 뷰에 올려보면, 빨간색 체인이 형성된것을 볼 수 있다. 이 값을 '키' 로 두 데이터를 합쳐서 표현하겠다는 의미이다. 저 빨간 체인을 다시 클릭하면 두 연결을 끊을 수 있다. 마찬가지로 회색체인을 클릭하면 빨개지면서 다시 연결시켜준다.

![png](/assets/images/Tab_Data/3_2.png)

이 상태에서 2016,2017년의 매출을 각각 집계할 수 있다.

![png](/assets/images/Tab_Data/3_3.png)

![png](/assets/images/Tab_Data/3_4.png)

이때 주 데이터 원본은 파란색 체크표시가 되어있는것을 볼 수 있다.(2017년 데이터) 보조 데이터원본은 주황색 확인 표시가 나타낙, 데이터 패널의 왼쪽에 주황색 막대도 같이 보이게된다.

# 주/보조 데이터 원본 

데이터 혼합에는 주 데이터 원본과, 1개 이상의 보조 데이터 원본이 필요하다. 뷰에 사용된 첫번째 데이터 원본 (즉 뷰에 먼저 추가한 녀석) 이 주 데이터가 되어서, 보조 데이터의 값을 제한할 수 있다. 즉 주 데이터 원본에 해당하는 일치가 있는 값만 뷰에 나타난다. (이는 Left 조인과 유사함을 알 수 있다.)

예를 들어 주 데이터 원본에 4월, 5월 및 6월만 포함된 Month(월) 필드가 있는 경우 보조 데이터 원본에 12개월에 대한 값이 있는 경우에도 Month(월)를 기반으로 작성되는 모든 뷰에는 4월, 5월 및 6월만 표시된다.

1.먼저 Railfall 데이터의 월 필드를 뷰에 먼저 가져온다. Rainfall 에는 월 3개만 있기 떄문에, Pollen 데이터를 보조 원본으로 추가하면 뷰에 3개월만 가져온다.

![png](/assets/images/Tab_Data/3_5.png)

2.이번에는 먼저 Pollen 데이터집합의 월 필드를 뷰에 먼저 가져온다. Pollen 에는 월이 12개 다 있기 떄문에, Rainfall 데이터를 보조 데이터로 하게된다면, 데이터 집합의 3개월에 대해서만 사용할 수 있다. 

![png](/assets/images/Tab_Data/3_6.png)



# Left 조인과 다른점

데이터 혼합은 Left 조인과 매우 유사합니다. 이 떄에 둘의 차이점은 집계를 수행할 때에 발생합니다.  

- 조인 : 데이터를 결합한 다음에 집계
- 블랜딩 : 각각 시트에서 집계를 진행한 이후에 집계

# 정리

- 데이터 혼합은 시트 단위로 이루어집니다.
- 필드가 사용되는 순서에 따라 주 데이터 원본과 보조 데이터 원본이 결정됩니다.
- 주 데이터 원본에는 파란색 확인 표시가 나타나고, 보조 데이터 원본 및 보조 데이터 원본의 필드에는 주황색 확인 표시가 나타납니다.
- 연결 필드는 공유 필드명에 따라 자동으로 결정되거나 혼합 관계를 수동으로 만들 수 있습니다.
- 데이터 혼합은 Left 조인과 유사하게 작동하며, 보조 데이터 원본의 데이터가 누락될 수 있습니다.
- 별표(*)가 나타날 수 있습니다. 데이터 혼합은 집계된 결과를 가져와서 뷰에서 결합하기 때문에, 이 표시는 단일 마크의 여러 차원 값을 나타냅니다.



<https://help.tableau.com/current/pro/desktop/ko-kr/multiple_connections.htm>